<!DOCTYPE html>
<html>
<head>
    <title>Workshop SENAI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container py-5">
        <h1>Formulário com validação</h1><hr>
        <div class="form-group">
            <label>Usuário:</label>
            <input type="text" class="form-control" id="usuario" oninput="validarCampo(this, 'userHelp', /^[a-zA-Z]{6,15}$/, 'Usuário inválido')">
            <small id="userHelp" class="form-text"></small><br>
            <label>Senha:</label>
            <input type="password" class="form-control" id="senha" oninput="validarCampo(this, 'passwordHelp', new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()_+\\-=[\\]{};\\\\|,.<>\\/?]).{8,30}$'), 'Senha inválida: A senha deve conter pelo menos uma letra maiúscula, uma letra minúscula, um número e um caractere especial. A quantidade máxima permitida é 30 caracteres e mínima 8.')">
            <small id="passwordHelp" class="form-text"></small><br>
            <label>E-mail:</label>
            <input type="email" class="form-control" id="email" oninput="validarCampo(this, 'emailHelp', /^[^\s@]+@[^\s@]+\.[^\s@]{3,}$/, 'E-mail inválido')">
            <small id="emailHelp" class="form-text"></small>
            <input type="submit" class="submit">
        </div>
    </div>

    <script>
        function validarCampo(input, helpId, regex, errorMessage) {
            const helpElement = document.getElementById(helpId);
            const value = input.value.trim();

            input.classList.remove("is-invalid");
            input.classList.remove("is-valid");
            helpElement.textContent = '';

            if (value !== '') {
                if (!regex.test(value)) {
                    input.classList.add("is-invalid");
                    helpElement.textContent = errorMessage;
                } else {
                    input.classList.add("is-valid");
                }
            }
        }
    </script>
</body>
</html>
