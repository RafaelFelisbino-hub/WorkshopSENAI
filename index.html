<!DOCTYPE html>
<html>
<head>
    <title>Workshop SENAI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <img class="slogan" src="https://static.portaldaindustria.com.br/media/uploads/logotipos/logo-senai.png" alt="Logo SENAI">
        <h3>Formulário com validação</h3><hr>
        <div class="form-group">
            <label>Usuário:</label>
            <input type="text" class="form-control" id="usuario" oninput="validarCampo(this, 'userHelp', /^[a-zA-Z]{6,15}$/, 'Usuário inválido')">
            <small id="userHelp" class="form-error"></small><br>
            <label>Senha:</label>
            <input type="password" class="form-control" id="senha" oninput="validarCampo(this, 'passwordHelp', new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()_+\\-=[\\]{};\\\\|,.<>\\/?]).{8,30}$'), 'Senha inválida:\n A senha deve conter pelo\n menos uma letra maiúscula,\n uma letra minúscula, um\n número e um caractere especial.\n A quantidade máxima permitida\n é 30 caracteres e mínima 8.')">
            <small id="passwordHelp" class="form-error"></small><br>
            <label>E-mail:</label>
            <input type="email" class="form-control" id="email" oninput="validarCampo(this, 'emailHelp', /^[^\s@]+@[^\s@]+\.[^\s@]{3,}$/, 'E-mail inválido')">
            <small id="emailHelp" class="form-error"></small><br>
            <button type="button" class="btn btn-primary" onclick="mostrarMensagem()">Enviar</button>
        </div>
    </div>

    <script>
        function validarCampo(input, helpId, regex, errorMessage) {
            const helpElement = document.getElementById(helpId);
            const value = input.value.trim();

            input.classList.remove("is-invalid");
            input.classList.remove("is-valid");
            helpElement.textContent = '';

            if (value !== '') {
                if (!regex.test(value)) {
                    input.classList.add("is-invalid");
                    helpElement.textContent = errorMessage;
                } else {
                    input.classList.add("is-valid");
                }
            }
        }
        function mostrarMensagem() {
            const inputIds = ["usuario", "senha", "email"];
            let allFieldsValid = true;

            inputIds.forEach(function(inputId) {
                const input = document.getElementById(inputId);
                if (!input.classList.contains("is-valid")) {
                    allFieldsValid = false;
                }
            });

            if (allFieldsValid) {
                alert("Formulário enviado!");

                inputIds.forEach(function(inputId) {
                    const input = document.getElementById(inputId);
                    input.value = "";
                    input.classList.remove("is-valid");
                });
            } else {
                alert("Por favor, preencha todos os campos corretamente.");
            }
        }
    </script>
</body>
</html>
